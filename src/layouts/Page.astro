---
import { Icon } from "astro-icon";
import Separator from "../components/Separator.astro";
import Meta from "../components/head/Meta.astro";
import { SITE_DESCRIPTION, SITE_TITLE } from "../config";
import { getLangFromUrl, getTransalations } from "../i18n";
import Document from "./Document.astro";
import IconLink from "../components/IconLink.astro";
import Typography from "../components/Typography.astro";

export interface Props {
  title?: string;
  description?: string;
}

const { title = SITE_TITLE, description = SITE_DESCRIPTION } = Astro.props;

const shouldIncludeMeta =
  typeof title === "string" && typeof description === "string";

const lang = getLangFromUrl(Astro.url);
const t = getTransalations(lang);
---

<Document>
  {
    shouldIncludeMeta && (
      <Meta slot="head" title={title} description={description} />
    )
  }

  <div
    class="container mx-auto flex min-h-screen max-w-5xl justify-center py-8"
  >
    <aside class="flex w-80 flex-col items-end">
      <header>
        <a href="/"><img src="/logo.svg" alt="" class="h-24 w-24" /></a>

        <div class="text-right">
          <Typography variant="h2">
            <a href="/">{t("header.blog")}</a>
          </Typography>
        </div>
      </header>

      <Separator />

      <nav>
        <ul>
          <li>
            <a href="/">{t("nav.home")}</a>
          </li>
        </ul>
      </nav>

      <Separator color="secondary" />

      <div class="flex gap-2">
        <IconLink href="https://github.com/sgq995">
          <Icon pack="tabler" name="brand-github" />
        </IconLink>

        <IconLink href="https://twitter.com/segoqu95">
          <Icon pack="tabler" name="brand-twitter" />
        </IconLink>
      </div>
    </aside>

    <main class="flex-grow">
      <slot />
    </main>
  </div>
</Document>
